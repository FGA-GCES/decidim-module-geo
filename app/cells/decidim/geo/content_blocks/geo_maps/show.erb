<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.2/dist/leaflet.css" integrity="sha256-sA+zWATbFveLLNqWO2gtiw3HL/lh1giY/Inf1BJ0z14=" crossorigin="">
<script src="https://unpkg.com/leaflet@1.9.2/dist/leaflet.js" integrity="sha256-o9N1jGDZrf5tS+Ft4gbIK7mYMipq9lqpVJ91xHSyKhg=" crossorigin=""></script>

<style>
  .decidimgeo__map {
    height: 640px;
    width: 100%;
    max-width: 100%;
    max-height: 100%;
  }  
</style>

<%= insert_map %>

<%= javascript_pack_tag "decidim_geo" %>

<script type="text/javascript">
<%
supported_models = [
  Decidim::Meetings::Meeting, 
  Decidim::Proposals::Proposal, 
  Decidim::ParticipatoryProcess, 
  Decidim::Assembly
]
geo_i18n = supported_models.map { |klass| [klass.name, klass.model_name.human] }.to_h
geo_i18n = {
  **geo_i18n,
  "scopes.all":  t('decidim.geo.scopes.all')
}
%>
  console.log("geo_maps")
  console.log(window.Decidim)
  window.Decidim.config.config.messages.geo = <%= geo_i18n.to_json %>
</script>
